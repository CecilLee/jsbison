<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script src="../node_modules/lodash/lodash.js"></script>
<script src="../src/datatypes.js"></script>
<script src="../src/lexer.js"></script>
<script src="../src/generator.js"></script>
</head>
<body>
<script>

var generator = new Generator({
    tokens: '+ * ( ) NUMBER',
    start: 'expr',
    lex: {
        rules: [{
                regex: /\d+/,
                action: 'return "NUMBER"'
            }, {
                regex: /\+/,
                action: 'return "+"'
            }, {
                regex: /\*/,
                action: 'return "*"'
            }, {
                regex: /\(/,
                action: 'return "("'
            }, {
                regex: /\)/,
                action: 'return ")"'
            }
        ]
    },
    type: 'LR(1)',
    bnf: {
        'expr': {
            'expr + term': 'this.$$ = parseInt($1) + parseInt($3)',
            'term': 'this.$$ = $1'
        },
        'term': {
            'term * factor': 'this.$$ = $1 * $3',
            'factor': 'this.$$ = $1'
        },
        'factor': {
            '( expr )': 'this.$$ = $2',
            'NUMBER': 'this.$$ = $1'
        }
    }
});

console.log(generator);
console.log(generator.toString());
var parserCode = generator.generate();
var parser = eval(parserCode);
console.log(parser.parse('1+2*3'));


</script>
</body>
</html>
